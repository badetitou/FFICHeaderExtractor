method generation
buildMethodSource
	"This method creates the source of a Smalltalk method that would initialize the class vars of the shared pool with the values obtained from the output file of the C program"
	| sourceStream ouput | 
	sourceStream := String new writeStream.
	ouput := self outputFilename asFileReference readStream contents.
	"The output file of the C program is a literal array that looks like this:
	#(SIGKILL 9 4)
	#(UNDEFINED-SIGLOST 0 0)
	#(SIGPIPE 13 4)
	"
	sourceStream nextPutAll: self autogeneratedMethodName; cr.
	sourceStream nextPutAll: '"Method automatically generated by FFICHeaderExtractor. Read more at https://github.com/marianopeck/FFICHeaderExtractor"'; cr.
	sourceStream tab; nextPutAll: '<platformName: '''; nextPutAll: FFISharedPool currentPlatformName; nextPutAll: ''' wordSize: '; nextPutAll: FFISharedPool currentWordSize asString; nextPutAll:'>'; cr.
	ouput linesDo: [ :aLine | 
		| array |
		array := Compiler evaluate: aLine. 
		((array first beginsWith: 'UNDEFINED') and: [ array third = 0 ])
			ifTrue: [ 
				"Undefined constants will be written in the method like this: 
				WHATEVER := nil.""WHATEVER is UNDEFINED for this platform""
				"
				sourceStream tab.
				sourceStream nextPutAll: (array first allButFirst: 'UNDEFINED' size); nextPutAll: ' := nil.'.
				sourceStream nextPutAll: '"'.
				sourceStream nextPutAll: (array first allButFirst: 'UNDEFINED' size).
				sourceStream nextPutAll: ' is UNDEFINED for this platform'.
				sourceStream nextPutAll: '"'.
			]
			ifFalse: [  
				"Defined constants will be written like:
				SIGKILL := 9.
				"
				sourceStream tab; nextPutAll: array first; nextPutAll: ' := '; nextPutAll: array second asString; nextPutAll: '.' ].
		sourceStream cr.
	].
	^ sourceStream contents